!function(a,b){a.cloudkid=a.cloudkid||{};var c=function(a){this.updater=null,this.browser=null,this.gui=null,this.main=null,this.resizable=!0,this.packageData=null;var c=(this.gui=require("nw.gui"),this.main=this.gui.Window.get()),d=require("fs"),e=this.packageData=JSON.parse(d.readFileSync("package.json")),f=e.window;this.resizable=f.resizable!==b?f.resizable:!0,c.on("close",this._onClose.bind(this));try{var g=JSON.parse(localStorage.getItem("windowSettings")||"null");g?(this.resizable?(c.width=g.width,c.height=g.height):(c.height=f.height,c.width=f.width),c.x=g.x,c.y=g.y):this.resizable||(c.height=f.height,c.width=f.width)}catch(h){}cloudkid.UpdateChecker&&(this.updater=new cloudkid.UpdateChecker(a)),cloudkid.Browser&&(this.browser=cloudkid.Browser.init()),c.show(),process.on("uncaughtException",this._handleErrors.bind(this))},d=c.prototype;d._handleErrors=function(a){alert(a)},d._onClose=function(){var a=this.main,b=this.gui,c={x:a.x,y:a.y};this.resizable&&(c.width=a.width,c.height=a.height),localStorage.setItem("windowSettings",JSON.stringify(c)),a.hide(),this.browser&&(this.browser.destroy(),this.browser=null),this.updater&&(this.updater.destroy(),this.updater=null),this.close(),b.App.closeAllWindows(),b.App.quit()},d.close=function(){},namespace("cloudkid").NodeWebkitApp=c}(window);